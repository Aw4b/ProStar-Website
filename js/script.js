// Language translations
const translations = {
    en: {
        // Page titles and meta
        'page-title-home': 'Pro Star Martial Arts Equipment',
        'page-title-products': 'Products - Pro Star Martial Arts Equipment', 
        'page-title-contact': 'Contact Us - Pro Star Martial Arts Equipment',
        'page-title-faq': 'FAQ - Pro Star Martial Arts Equipment',
        'meta-desc-home': 'Welcome to Pro Star Martial Arts Equipment - Professional gear for Boxing, MMA, and Brazilian Jiu Jitsu. Quality from Italy.',
        'meta-desc-products': 'Explore Pro Star\'s collection of martial arts equipment for Boxing, MMA, and Brazilian Jiu Jitsu.',
        'meta-desc-contact': 'Contact Pro Star for professional martial arts equipment. Email: prostarsrls@gmail.com, Phone: +39 366 130 7596',
        'meta-desc-faq': 'Frequently asked questions about Pro Star martial arts equipment. Learn about purchasing, materials, shipping, and more.',
        
        // Navigation
        'nav-home': 'Home',
        'nav-products': 'Products',
        'nav-contact': 'Contact Us',
        'nav-faq': 'FAQ',
        
        // Homepage
        'boxing-title': 'Boxing',
        'boxing-subtitle': 'Professional Boxing Equipment',
        'mma-title': 'MMA',
        'mma-subtitle': 'Mixed Martial Arts Gear',
        'bjj-title': 'BJJ',
        'bjj-subtitle': 'Brazilian Jiu Jitsu Apparel',
        'explore-products': 'Explore Products',
        'categories-title': 'Our Categories',
        'view-products': 'View Products',
        
        // About section
        'about-title': 'About Us',
        'about-p1': 'Pro Star is a martial arts equipment company based in Carpi (Modena), Italy. Our mission is to provide high-quality gear that combines excellent craftsmanship, sleek design, and affordability.',
        'about-p2': 'Whether you\'re a beginner or a professional, we believe everyone deserves access to top-tier equipment. We specialize in Boxing, MMA, and Brazilian Jiu Jitsu (BJJ) apparel and accessories — carefully selected and crafted to support performance and durability.',
        'about-p3': 'For more information, feel free to contact us at <a href="mailto:prostarsrls@gmail.com" class="contact-link">prostarsrls@gmail.com</a>.',
        
        // Materials
        'boxing-material': '100% Leather',
        'mma-material': '100% Leather',
        'bjj-material': '100% Cotton',
        
        // Products page
        'products-title': 'Our Products',
        'products-subtitle': 'Explore our premium martial arts equipment for Boxing, MMA, and Brazilian Jiu Jitsu.',
        'products-boxing-heading': 'Boxing',
        'products-mma-heading': 'MMA', 
        'products-bjj-heading': 'BJJ',
        'product-code': 'Code:',
        'filter-all': 'All',
        'filter-boxing': 'Boxing',
        'filter-mma': 'MMA',
        'filter-bjj': 'BJJ',
        
        // Contact page
        'contact-title': 'Contact Us',
        'contact-subtitle': 'If you\'re interested in our products, contact us here:',
        'contact-email': 'Email',
        'contact-email-desc': 'Send us a message',
        'contact-phone': 'Phone',
        'contact-phone-desc': 'Call us directly',
        'contact-location': 'Location',
        'contact-location-desc': 'Our headquarters',
        'contact-address': 'Dorando Pietri n.21, Carpi (Modena), Italy',
        
        // FAQ page
        'faq-title': 'Frequently Asked Questions',
        'faq-subtitle': 'Everything you need to know about Pro Star equipment',
        'faq-q1': 'How can we buy a product?',
        'faq-a1': 'By contacting us via email (prostarsrls@gmail.com) or phone (+39 366 130 7596).',
        'faq-q2': 'What materials do you use for your products?',
        'faq-a2': 'We use premium materials: 100% leather for Boxing and MMA equipment, and 100% cotton for BJJ apparel.',
        'faq-q3': 'Do you offer custom sizing or personalization?',
        'faq-a3': 'Yes, we can provide custom sizing and personalization options. Contact us to discuss your specific requirements and pricing.',
        'faq-q4': 'What is your return policy?',
        'faq-a4': 'We stand behind the quality of our products. If you\'re not satisfied, contact us within 30 days of purchase to discuss return or exchange options.',
        'faq-q5': 'Do you ship internationally?',
        'faq-a5': 'Yes, we ship worldwide. Contact us for shipping rates and delivery times to your location.',
        
        // Footer
        'footer-description': 'Professional martial arts equipment from Carpi, Italy. Quality gear for Boxing, MMA, and Brazilian Jiu Jitsu.',
        'footer-rights': 'All rights reserved.',
        'footer-copyright': '© 2025 Pro Star.',
        
        // Alt text for images
        'alt-logo': 'Pro Star Logo',
        'alt-boxing-product': 'Boxing Product',
        'alt-mma-product': 'MMA Product',
        'alt-bjj-product': 'BJJ Product'
    },
    it: {
        // Page titles and meta
        'page-title-home': 'Pro Star Attrezzature Arti Marziali',
        'page-title-products': 'Prodotti - Pro Star Attrezzature Arti Marziali',
        'page-title-contact': 'Contattaci - Pro Star Attrezzature Arti Marziali',
        'page-title-faq': 'FAQ - Pro Star Attrezzature Arti Marziali',
        'meta-desc-home': 'Benvenuti a Pro Star Attrezzature Arti Marziali - Attrezzature professionali per Boxe, MMA e Brazilian Jiu Jitsu. Qualità dall\'Italia.',
        'meta-desc-products': 'Esplora la collezione di attrezzature per arti marziali Pro Star per Boxe, MMA e Brazilian Jiu Jitsu.',
        'meta-desc-contact': 'Contatta Pro Star per attrezzature professionali per arti marziali. Email: prostarsrls@gmail.com, Telefono: +39 366 130 7596',
        'meta-desc-faq': 'Domande frequenti sulle attrezzature per arti marziali Pro Star. Scopri acquisti, materiali, spedizioni e altro.',
        
        // Navigation
        'nav-home': 'Home',
        'nav-products': 'Prodotti',
        'nav-contact': 'Contattaci',
        'nav-faq': 'FAQ',
        
        // Homepage
        'boxing-title': 'Boxe',
        'boxing-subtitle': 'Attrezzature Professionali per Boxe',
        'mma-title': 'MMA',
        'mma-subtitle': 'Attrezzature per Arti Marziali Miste',
        'bjj-title': 'BJJ',
        'bjj-subtitle': 'Abbigliamento Brazilian Jiu Jitsu',
        'explore-products': 'Esplora Prodotti',
        'categories-title': 'Le Nostre Categorie',
        'view-products': 'Vedi Prodotti',
        
        // About section
        'about-title': 'Chi Siamo',
        'about-p1': 'Pro Star è un\'azienda di attrezzature per arti marziali con sede a Carpi (Modena), Italia. La nostra missione è fornire attrezzature di alta qualità che combinano eccellente maestria, design elegante e convenienza.',
        'about-p2': 'Che tu sia un principiante o un professionista, crediamo che tutti meritino l\'accesso ad attrezzature di primo livello. Siamo specializzati in abbigliamento e accessori per Boxe, MMA e Brazilian Jiu Jitsu (BJJ) — accuratamente selezionati e realizzati per supportare prestazioni e durata.',
        'about-p3': 'Per maggiori informazioni, non esitare a contattarci a <a href="mailto:prostarsrls@gmail.com" class="contact-link">prostarsrls@gmail.com</a>.',
        
        // Materials
        'boxing-material': '100% Pelle',
        'mma-material': '100% Pelle',
        'bjj-material': '100% Cotone',
        
        // Products page
        'products-title': 'I Nostri Prodotti',
        'products-subtitle': 'Esplora le nostre attrezzature premium per arti marziali per Boxe, MMA e Brazilian Jiu Jitsu.',
        'products-boxing-heading': 'Boxe',
        'products-mma-heading': 'MMA',
        'products-bjj-heading': 'BJJ',
        'product-code': 'Codice:',
        'filter-all': 'Tutti',
        'filter-boxing': 'Boxe',
        'filter-mma': 'MMA',
        'filter-bjj': 'BJJ',
        
        // Contact page
        'contact-title': 'Contattaci',
        'contact-subtitle': 'Se sei interessato ai nostri prodotti, contattaci qui:',
        'contact-email': 'Email',
        'contact-email-desc': 'Inviaci un messaggio',
        'contact-phone': 'Telefono',
        'contact-phone-desc': 'Chiamaci direttamente',
        'contact-location': 'Posizione',
        'contact-location-desc': 'La nostra sede centrale',
        'contact-address': 'Dorando Pietri n.21, Carpi (Modena), Italia',
        
        // FAQ page
        'faq-title': 'Domande Frequenti',
        'faq-subtitle': 'Tutto quello che devi sapere sulle attrezzature Pro Star',
        'faq-q1': 'Come possiamo acquistare un prodotto?',
        'faq-a1': 'Contattandoci via email (prostarsrls@gmail.com) o telefono (+39 366 130 7596).',
        'faq-q2': 'Quali materiali utilizzate per i vostri prodotti?',
        'faq-a2': 'Utilizziamo materiali premium: 100% pelle per attrezzature Boxe e MMA, e 100% cotone per abbigliamento BJJ.',
        'faq-q3': 'Offrite taglie personalizzate o personalizzazione?',
        'faq-a3': 'Sì, possiamo fornire taglie personalizzate e opzioni di personalizzazione. Contattaci per discutere i tuoi requisiti specifici e i prezzi.',
        'faq-q4': 'Qual è la vostra politica di reso?',
        'faq-a4': 'Garantiamo la qualità dei nostri prodotti. Se non sei soddisfatto, contattaci entro 30 giorni dall\'acquisto per discutere opzioni di reso o cambio.',
        'faq-q5': 'Spedite internazionalmente?',
        'faq-a5': 'Sì, spediamo in tutto il mondo. Contattaci per tariffe di spedizione e tempi di consegna nella tua zona.',
        
        // Footer
        'footer-description': 'Attrezzature professionali per arti marziali da Carpi, Italia. Attrezzature di qualità per Boxe, MMA e Brazilian Jiu Jitsu.',
        'footer-rights': 'Tutti i diritti riservati.',
        'footer-copyright': '© 2025 Pro Star.',
        
        // Alt text for images
        'alt-logo': 'Logo Pro Star',
        'alt-boxing-product': 'Prodotto Boxe',
        'alt-mma-product': 'Prodotto MMA',
        'alt-bjj-product': 'Prodotto BJJ'
    }
};

// Global variables
let currentSlide = 0;
let currentLanguage = 'en';
const slides = document.querySelectorAll('.carousel-slide');
const indicators = document.querySelectorAll('.indicator');

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    initializeCarousel();
    switchLanguage('en');
    initializePage();
    updatePageTitleAndMeta();
});

// NEW FUNCTION: Update page titles and meta descriptions
function updatePageTitleAndMeta() {
    const currentPath = window.location.pathname;
    let titleKey, metaKey;
    
    if (currentPath.includes('products.html')) {
        titleKey = 'page-title-products';
        metaKey = 'meta-desc-products';
    } else if (currentPath.includes('contact.html')) {
        titleKey = 'page-title-contact';
        metaKey = 'meta-desc-contact';
    } else if (currentPath.includes('faq.html')) {
        titleKey = 'page-title-faq';
        metaKey = 'meta-desc-faq';
    } else {
        titleKey = 'page-title-home';
        metaKey = 'meta-desc-home';
    }
    
    // Update title
    if (translations[currentLanguage][titleKey]) {
        document.title = translations[currentLanguage][titleKey];
    }
    
    // Update meta description
    const metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc && translations[currentLanguage][metaKey]) {
        metaDesc.setAttribute('content', translations[currentLanguage][metaKey]);
    }
}

// NEW FUNCTION: Update alt text for images
function updateAltText() {
    const imagesWithAltTranslate = document.querySelectorAll('[data-translate-alt]');
    imagesWithAltTranslate.forEach(img => {
        const altKey = img.getAttribute('data-translate-alt');
        if (translations[currentLanguage] && translations[currentLanguage][altKey]) {
            img.setAttribute('alt', translations[currentLanguage][altKey]);
        }
    });
}

// Carousel functionality
function initializeCarousel() {
    if (slides.length === 0) return;
    
    // Auto-advance carousel every 5 seconds
    setInterval(() => {
        nextSlide();
    }, 5000);
}

function nextSlide() {
    changeSlide(1);
}

function changeSlide(direction) {
    if (slides.length === 0) return;
    
    slides[currentSlide].classList.remove('active');
    if (indicators[currentSlide]) {
        indicators[currentSlide].classList.remove('active');
    }
    
    currentSlide += direction;
    
    if (currentSlide >= slides.length) {
        currentSlide = 0;
    } else if (currentSlide < 0) {
        currentSlide = slides.length - 1;
    }
    
    slides[currentSlide].classList.add('active');
    if (indicators[currentSlide]) {
        indicators[currentSlide].classList.add('active');
    }
}

function currentSlideSet(n) {
    if (slides.length === 0) return;
    
    slides[currentSlide].classList.remove('active');
    if (indicators[currentSlide]) {
        indicators[currentSlide].classList.remove('active');
    }
    
    currentSlide = n - 1;
    
    slides[currentSlide].classList.add('active');
    if (indicators[currentSlide]) {
        indicators[currentSlide].classList.add('active');
    }
}

// Mobile menu toggle
function toggleMobileMenu() {
    const mobileMenu = document.getElementById('mobile-menu');
    if (mobileMenu) {
        mobileMenu.classList.toggle('hidden');
    }
}

// Language switching
function switchLanguage(lang) {
    currentLanguage = lang;
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    const activeBtn = document.getElementById(`lang-${lang}`);
    if (activeBtn) {
        activeBtn.classList.add('active');
    }
    
    // Update all translatable elements
    updateTranslations();
    updatePageTitleAndMeta();
    updateAltText(); // Add this line
    
    // Store language preference
    localStorage.setItem('preferred-language', lang);
}

function updateTranslations() {
    const elementsToTranslate = document.querySelectorAll('[data-translate]');
    elementsToTranslate.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[currentLanguage] && translations[currentLanguage][key]) {
            element.innerHTML = translations[currentLanguage][key];
        }
    });
}

// Product filtering (for products page)
function filterProducts(category) {
    const products = document.querySelectorAll('[data-category]');
    const filters = document.querySelectorAll('.filter-btn');
    
    // Update active filter button
    filters.forEach(filter => {
        filter.classList.remove('active');
    });
    
    // Find the clicked button and make it active
    const activeFilter = Array.from(filters).find(filter => 
        filter.textContent.toLowerCase().includes(category.toLowerCase()) || 
        (category === 'all' && filter.textContent.toLowerCase().includes('all'))
    );
    
    if (activeFilter) {
        activeFilter.classList.add('active');
    }
    
    // Show/hide products with animation
    products.forEach(product => {
        if (category === 'all' || product.dataset.category === category) {
            product.style.display = 'block';
            product.classList.add('loading');
        } else {
            product.style.display = 'none';
        }
    });
}

// Smooth scrolling for anchor links
function smoothScroll(target) {
    const element = document.querySelector(target);
    if (element) {
        element.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    }
}

// Handle URL hash for direct category access
function handleHashChange() {
    const hash = window.location.hash;
    if (hash) {
        const category = hash.substring(1); // Remove the #
        if (['boxing', 'mma', 'bjj'].includes(category)) {
            setTimeout(() => {
                filterProducts(category);
            }, 100);
        }
    }
}

// Initialize page functionality
function initializePage() {
    // Load saved language preference
    const savedLanguage = localStorage.getItem('preferred-language');
    if (savedLanguage && translations[savedLanguage]) {
        switchLanguage(savedLanguage);
    }
    
    // Handle hash changes for direct category links
    window.addEventListener('hashchange', handleHashChange);
    handleHashChange(); // Check initial hash
    
    // Add loading animation to elements
    const animatedElements = document.querySelectorAll('.category-card, .product-card, .contact-card, .faq-item');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('loading');
            }
        });
    }, {
        threshold: 0.1
    });
    
    animatedElements.forEach(element => {
        observer.observe(element);
    });
}

// Utility functions
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Handle form submissions (if needed in the future)
function handleContactForm(event) {
    event.preventDefault();
    // This can be implemented later if contact forms are added
    console.log('Contact form submitted');
}

// Keyboard navigation for carousel
document.addEventListener('keydown', function(event) {
    if (slides.length === 0) return;
    
    switch(event.key) {
        case 'ArrowLeft':
            changeSlide(-1);
            break;
        case 'ArrowRight':
            changeSlide(1);
            break;
    }
});

// Expose functions to global scope for onclick handlers
window.toggleMobileMenu = toggleMobileMenu;
window.switchLanguage = switchLanguage;
window.filterProducts = filterProducts;
window.changeSlide = changeSlide;
window.currentSlide = currentSlideSet;
